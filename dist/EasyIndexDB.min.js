!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).EasyIndexDB=t()}(this,function(){"use strict";var e=(t.prototype.parserSQL=function(e){for(var t=e.toString().trim().toLowerCase(),n=this.handleSingleQuoSpace(t),r=0,o=n.length;r<o;r+=1){var a=n[r],i=0,s=a.length;if(a){for(;i<s;i+=1){var l=a.charAt(i);if(/^[a-z_]+$/i.test(l)){for(var u="",c=a.charAt(i);i<a.length;){if(i++,u=a.charAt(i),!/^[\w\.:]+$/i.test(u)){i--;break}c+=u}console.log(c),this.tokenQue.push(c)}}this.handleAllEnd()}}},t.prototype.getLexterResult=function(){return this.sqlQue},t.prototype.tokenStart=function(e){},t.prototype.tokenEnd=function(e){},t.prototype.handleAllEnd=function(){var e={cmd:this.tokenQue.shift(),other:this.tokenQue};this.tokenQue=[],this.sqlQue.push(e)},t.prototype.handleSingleQuoSpace=function(e){var t=e.split(";");return 0<=t.length?t.map(function(e){return e.trim()}):t},t);function t(){this.sqlQue=[],this.tokenQue=[]}var o,n,a=(r.parserUseSql=function(e){return{cmd:e.cmd,operation:e.other.shift()}},r);function r(){}(n=o=o||{}).Use="use",n.Create="create",n.Select="select",n.Update="update",n.Insert="insert",n.Delete="delete";var i=(s.parserTableSql=function(e){e.other.shift();var t=e.cmd,n=e.other.shift(),r=new Map;return e.other.forEach(function(e,t,n){r.set(e,e)}),{cmd:t,table:{tableName:n,column:r}}},s);function s(){}var l=(u.prototype.initDB=function(e){},u.prototype.execute=function(e){this.sqlLexter.parserSQL(e);var t=this.sqlLexter.getLexterResult();console.log("after lexter:",t),t.forEach(this.handleLexter.bind(this))},u.prototype.handleLexter=function(e,t,n){var r=null;switch(e.cmd){case o.Use:r=a.parserUseSql(e);break;case o.Create:r=i.parserTableSql(e)}console.log("handleLexter: ",r)},u);function u(){this.sqlLexter=null,this.useGrammar=null,this.sqlLexter=new e}return(new l).execute("\n  use DBName_1;\n\n  create table TName_1\n  (\n    name,\n    age,\n    relation,\n  );\n  create table TName_2\n  (\n    name2,\n    age2,\n    relation2,\n  );\n"),l});
